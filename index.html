<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografica: L'Arte della Data Visualization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 280px;
            max-height: 320px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 320px;
                max-height: 350px;
            }
        }
        .gradient-text {
            background: linear-gradient(to right, #F94144, #F3722C);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #F8961E;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">

        <header class="text-center my-12">
            <h1 class="text-4xl md:text-6xl font-black tracking-tight leading-tight">
                <span class="gradient-text">L'Arte di Raccontare Storie</span><br>con i Dati
            </h1>
            <p class="mt-4 text-lg text-gray-600 max-w-3xl mx-auto">Una guida interattiva per trasformare numeri complessi in insight chiari e decisioni efficaci attraverso la data visualization.</p>
        </header>

        <section id="perche" class="my-16">
            <h2 class="text-3xl font-bold text-center mb-10">1. Perch√© Visualizzare i Dati?</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 text-center">
                <div class="bg-white p-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300">
                    <div class="text-5xl mb-3" style="color: #F94144;">üí°</div>
                    <h3 class="text-xl font-bold mb-2">Scoprire Insight</h3>
                    <p class="text-gray-600">Identifica pattern, trend, correlazioni e anomalie che rimarrebbero nascosti in una tabella.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300">
                    <div class="text-5xl mb-3" style="color: #F8961E;">üß©</div>
                    <h3 class="text-xl font-bold mb-2">Semplificare</h3>
                    <p class="text-gray-600">Traduci set di dati complessi in formati immediatamente comprensibili a colpo d'occhio.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300">
                    <div class="text-5xl mb-3" style="color: #43AA8B;">üì¢</div>
                    <h3 class="text-xl font-bold mb-2">Comunicare</h3>
                    <p class="text-gray-600">Trasmetti il tuo messaggio in modo pi√π efficace, persuasivo e memorabile al pubblico.</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-300">
                    <div class="text-5xl mb-3" style="color: #577590;">üéØ</div>
                    <h3 class="text-xl font-bold mb-2">Guidare Decisioni</h3>
                    <p class="text-gray-600">Fornisci una base solida e visiva per prendere decisioni strategiche pi√π informate e rapide.</p>
                </div>
            </div>
        </section>

        <section id="pilastri" class="my-16 bg-white p-8 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-bold text-center mb-6">2. I Pilastri di un Grafico Efficace</h2>
            <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">Un grafico deve essere **funzionale** e trasmettere il messaggio senza distorsioni o rumore visivo.</p>
            <div class="grid grid-cols-1 md:grid-cols-5 gap-6 text-center">
                <div class="p-4 rounded-lg bg-red-50" style="border: 2px solid #F94144;">
                    <h4 class="font-bold text-lg" style="color: #F94144;">Chiarezza</h4>
                    <p class="text-sm text-gray-600">Messaggio immediato.</p>
                </div>
                <div class="p-4 rounded-lg bg-amber-50" style="border: 2px solid #F8961E;">
                    <h4 class="font-bold text-lg" style="color: #F8961E;">Accuratezza</h4>
                    <p class="text-sm text-gray-600">Dati veritieri (Asse Y da zero).</p>
                </div>
                <div class="p-4 rounded-lg bg-yellow-50" style="border: 2px solid #F9C74F;">
                    <h4 class="font-bold text-lg" style="color: #F9C74F;">Semplicit√†</h4>
                    <p class="text-sm text-gray-600">Rimuovi il disordine ("Chart Junk").</p>
                </div>
                <div class="p-4 rounded-lg bg-green-50" style="border: 2px solid #90BE6D;">
                    <h4 class="font-bold text-lg" style="color: #90BE6D;">Contesto</h4>
                    <p class="text-sm text-gray-600">Titolo, assi e unit√† etichettati.</p>
                </div>
                <div class="p-4 rounded-lg bg-blue-50" style="border: 2px solid #577590;">
                    <h4 class="font-bold text-lg" style="color: #577590;">Messaggio</h4>
                    <p class="text-sm text-gray-600">Un solo obiettivo forte.</p>
                </div>
            </div>
        </section>

        <section id="guida" class="my-16">
            <h2 class="text-3xl font-bold text-center mb-2">3. La Guida alla Scelta del Grafico</h2>
            <p class="text-center text-gray-600 mb-12 max-w-2xl mx-auto">Scegli lo strumento in base all'obiettivo: **Confronto, Tendenza, Proporzione o Relazione.**</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-2 text-center" style="color: #F94144;">Confrontare: Grafico a Barre</h3>
                    <p class="text-gray-600 mb-4 text-center">Ideale per confrontare categorie discrete. Usa l'ordinamento per facilitare la classifica.</p>
                    <div class="chart-container">
                        <canvas id="barChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-500 text-center">**Esempio:** "Vendite per Regione nel Q1 2024" ‚Äì Identifica chiaramente il leader di mercato (Regione B).</p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-2 text-center" style="color: #F8961E;">Tendenza: Grafico a Linee</h3>
                    <p class="text-gray-600 mb-4 text-center">Essenziale per mostrare andamenti e serie storiche nel tempo (es. mesi, trimestri).</p>
                    <div class="chart-container">
                        <canvas id="lineChart"></canvas>
                    </div>
                     <p class="mt-4 text-sm text-gray-500 text-center">**Esempio:** "Andamento delle Visite al Sito Web" ‚Äì Evidenzia picchi e cali stagionali nel corso dell'anno.</p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-2 text-center" style="color: #90BE6D;">Proporzioni: Grafico a Ciambella</h3>
                    <p class="text-gray-600 mb-4 text-center">Per mostrare la composizione di un intero (il 100%). **Usare solo per 2-4 categorie distinte.**</p>
                    <div class="chart-container">
                        <canvas id="doughnutChart"></canvas>
                    </div>
                     <p class="mt-4 text-sm text-gray-500 text-center">**Esempio:** "Distribuzione Budget" ‚Äì Mostra che la maggioranza del budget (45%) √® dedicata al Marketing.</p>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-lg">
                    <h3 class="text-2xl font-bold mb-2 text-center" style="color: #577590;">Relazioni: Grafico a Dispersione</h3>
                    <p class="text-gray-600 mb-4 text-center">Per trovare correlazioni tra due variabili (es. se X aumenta, aumenta anche Y?).</p>
                    <div class="chart-container">
                        <canvas id="scatterChart"></canvas>
                    </div>
                     <p class="mt-4 text-sm text-gray-500 text-center">**Esempio:** "Investimento vs Acquisizioni" ‚Äì Conferma una correlazione positiva tra i due fattori.</p>
                </div>
            </div>
        </section>

        <section id="colori" class="my-16 bg-white p-8 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-bold text-center mb-6">4. L'Importanza Etica del Colore</h2>
            <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">Il colore guida l'occhio. Usalo per significato, non per estetica. La palette "Vibrant" qui utilizzata √®: #F94144, #F8961E, #F9C74F, #90BE6D, #43AA8B, #577590.</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h4 class="font-bold text-xl mb-2" style="color: #F8961E;">Sequenziali</h4>
                    <p class="text-sm text-gray-600 mb-3">Intensit√† crescente di un valore (es. Mappa di Calore).</p>
                    <div class="flex rounded-lg overflow-hidden">
                        <div class="w-1/5 h-12" style="background-color: #ffe0d5;"></div>
                        <div class="w-1/5 h-12" style="background-color: #f9b49b;"></div>
                        <div class="w-1/5 h-12" style="background-color: #f68c74;"></div>
                        <div class="w-1/5 h-12" style="background-color: #F94144;"></div>
                        <div class="w-1/5 h-12" style="background-color: #d6383c;"></div>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold text-xl mb-2" style="color: #577590;">Divergenti</h4>
                    <p class="text-sm text-gray-600 mb-3">Deviazioni da un punto centrale (es. Profitti/Perdite).</p>
                    <div class="flex rounded-lg overflow-hidden">
                        <div class="w-1/4 h-12" style="background-color: #F94144;"></div>
                        <div class="w-1/4 h-12" style="background-color: #f9c74f;"></div>
                        <div class="w-1/4 h-12" style="background-color: #90BE6D;"></div>
                        <div class="w-1/4 h-12" style="background-color: #43AA8B;"></div>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold text-xl mb-2" style="color: #43AA8B;">Categorici</h4>
                    <p class="text-sm text-gray-600 mb-3">Distinguere gruppi non ordinati (es. Nomi di prodotti).</p>
                    <div class="flex rounded-lg overflow-hidden">
                        <div class="w-1/4 h-12" style="background-color: #F9844A;"></div>
                        <div class="w-1/4 h-12" style="background-color: #F9C74F;"></div>
                        <div class="w-1/4 h-12" style="background-color: #90BE6D;"></div>
                        <div class="w-1/4 h-12" style="background-color: #577590;"></div>
                    </div>
                </div>
            </div>
            <p class="mt-6 text-sm text-center text-gray-500">**Accessibilit√†:** Evita combinazioni rosso/verde per distinzioni critiche per non penalizzare chi soffre di daltonismo.</p>
        </section>

        <section id="consigli" class="my-16">
            <h2 class="text-3xl font-bold text-center mb-10">5. Storytelling e Narrazione con i Dati</h2>
            <div class="max-w-2xl mx-auto bg-white p-8 rounded-xl shadow-lg">
                <ul class="space-y-4">
                    <li class="flex items-start">
                        <span class="text-xl mr-3" style="color: #F94144;">1.</span>
                        <div>
                            <h4 class="font-bold">Il "Perch√©"</h4>
                            <p class="text-gray-600">Inizia spiegando perch√© il dato √® rilevante per il pubblico. D√† un contesto.</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="text-xl mr-3" style="color: #F8961E;">2.</span>
                        <div>
                            <h4 class="font-bold">Il "Cosa"</h4>
                            <p class="text-gray-600">Mostra il grafico con un titolo che sia gi√† l'insight ("Le vendite sono cresciute del 20%").</p>
                        </div>
                    </li>
                    <li class="flex items-start">
                        <span class="text-xl mr-3" style="color: #90BE6D;">3.</span>
                        <div>
                            <h4 class="font-bold">L'Azione</h4>
                            <p class="text-gray-600">Concludi con l'implicazione: "Cosa facciamo ora che conosciamo questo dato?".</p>
                        </div>
                    </li>
                </ul>
                <p class="mt-6 text-sm text-center text-gray-500">**Regola d'oro:** Non mostrare solo un grafico. **Racconta la storia** che il dato nasconde.</p>
            </div>
        </section>

        <!-- NUOVA SEZIONE: FUNZIONALIT√Ä GEMINI API -->
        <section id="ai-advice" class="my-16 bg-white p-8 rounded-xl shadow-2xl">
            <h2 class="text-3xl font-bold text-center mb-6">6. Consulenza Storytelling AI</h2>
            <p class="text-center text-gray-600 mb-8 max-w-2xl mx-auto">Inserisci il tuo scenario di visualizzazione dati (es. "Devo confrontare 100 prodotti diversi") e l'IA ti suggerir√† la migliore strategia.</p>

            <div class="max-w-3xl mx-auto space-y-4">
                <input id="promptInput" type="text" placeholder="Il mio problema √®:..." class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500" />
                <button onclick="getAIAdvice()" id="generateButton" class="w-full py-3 bg-amber-500 text-white font-bold rounded-lg hover:bg-amber-600 transition-colors duration-300 flex items-center justify-center">
                    Ottieni Strategia AI
                </button>
            </div>

            <div id="loadingIndicator" class="mt-6 text-center hidden">
                <div class="loader mx-auto"></div>
                <p class="text-gray-500 mt-2">L'AI sta analizzando il tuo problema...</p>
            </div>

            <div id="adviceOutput" class="mt-8 p-6 bg-gray-50 rounded-xl border border-gray-200">
                <p class="text-gray-700 font-semibold" id="adviceTitle">Risposta del Consulente:</p>
                <div id="adviceText" class="mt-2 text-gray-600">
                    Qui apparir√† il consiglio dell'AI non appena lo genererai.
                </div>
            </div>
        </section>
        <!-- FINE NUOVA SEZIONE -->

        <footer class="text-center my-12">
            <p class="text-gray-700 font-bold text-xl">Un grafico efficace non √® quello che mostra di pi√π, ma quello che <span class="gradient-text">comunica meglio</span>.</p>
            <p class="text-sm text-gray-500 mt-2">Data Visualization & Storytelling | Corso Interno 2024</p>
        </footer>
    </div>

    <script>
        const apiKey = "";
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

        const chartColors = {
            primary: '#F94144', secondary: '#F8961E', tertiary: '#F9C74F', quaternary: '#90BE6D', neutral: '#577590',
            bgPrimary: 'rgba(249, 65, 68, 0.2)', bgSecondary: 'rgba(248, 150, 30, 0.2)', bgTertiary: 'rgba(249, 199, 79, 0.2)',
            bgQuaternary: 'rgba(144, 190, 109, 0.2)', bgNeutral: 'rgba(87, 117, 144, 0.2)',
        };

        const globalChartOptions = {
            responsive: true, maintainAspectRatio: false,
            plugins: {
                legend: { position: 'bottom', labels: { font: { family: 'Inter' }, padding: 20 } },
                tooltip: {
                    enabled: true, backgroundColor: '#212529',
                    titleFont: { family: 'Inter', size: 14, weight: 'bold' },
                    bodyFont: { family: 'Inter', size: 12 }, padding: 10, cornerRadius: 5,
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) { return label.join(' '); } else { return label; }
                        }
                    }
                }
            },
            scales: {
                y: { beginAtZero: true, grid: { color: '#e5e7eb' }, ticks: { font: { family: 'Inter' } } },
                x: { grid: { display: false }, ticks: { font: { family: 'Inter' } } }
            }
        };

        function initializeCharts() {
            const barChartCtx = document.getElementById('barChart').getContext('2d');
            new Chart(barChartCtx, {
                type: 'bar', data: {
                    labels: ['Regione A', 'Regione B', 'Regione C', 'Regione D'],
                    datasets: [{
                        label: 'Vendite (in K ‚Ç¨)', data: [120, 250, 150, 80],
                        backgroundColor: [chartColors.bgPrimary, chartColors.bgSecondary, chartColors.bgTertiary, chartColors.bgNeutral],
                        borderColor: [chartColors.primary, chartColors.secondary, chartColors.tertiary, chartColors.neutral],
                        borderWidth: 2, borderRadius: 5
                    }]
                }, options: { ...globalChartOptions }
            });

            const lineChartCtx = document.getElementById('lineChart').getContext('2d');
            new Chart(lineChartCtx, {
                type: 'line', data: {
                    labels: ['Q1', 'Q2', 'Q3', 'Q4'],
                    datasets: [{
                        label: 'Visite al Sito (in K)', data: [65, 79, 92, 81],
                        fill: true, borderColor: chartColors.secondary, backgroundColor: chartColors.bgSecondary,
                        tension: 0.4, pointBackgroundColor: chartColors.secondary, pointRadius: 5
                    }]
                }, options: { ...globalChartOptions }
            });

            const doughnutChartCtx = document.getElementById('doughnutChart').getContext('2d');
            new Chart(doughnutChartCtx, {
                type: 'doughnut', data: {
                    labels: ['Marketing', 'Sviluppo', 'Vendite', 'Amministrazione'],
                    datasets: [{
                        label: 'Distribuzione Budget', data: [45, 25, 15, 15],
                        backgroundColor: [chartColors.quaternary, chartColors.neutral, chartColors.primary, chartColors.secondary],
                        hoverOffset: 4
                    }]
                },
                options: {
                    ...globalChartOptions, scales: { y: { display: false }, x: { display: false } }
                }
            });

            const scatterChartCtx = document.getElementById('scatterChart').getContext('2d');
            new Chart(scatterChartCtx, {
                type: 'scatter', data: {
                    datasets: [{
                        label: 'Investimento vs Acquisizioni',
                        data: [
                            {x: 100, y: 20}, {x: 120, y: 24}, {x: 150, y: 35}, {x: 180, y: 38},
                            {x: 200, y: 45}, {x: 230, y: 55}, {x: 250, y: 58}, {x: 280, y: 65}
                        ],
                        backgroundColor: chartColors.neutral, pointRadius: 6, pointHoverRadius: 8
                    }]
                },
                options: {
                    ...globalChartOptions,
                    scales: {
                        x: { ...globalChartOptions.scales.x, title: { display: true, text: 'Investimento (in ‚Ç¨)' } },
                        y: { ...globalChartOptions.scales.y, title: { display: true, text: 'Clienti Acquisiti' } }
                    }
                }
            });
        }
        window.onload = initializeCharts;

        async function fetchWithRetry(url, options, retries = 3) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                    return response;
                } catch (error) {
                    if (i === retries - 1) throw error;
                    const delay = Math.pow(2, i) * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }

        async function getAIAdvice() {
            const promptInput = document.getElementById('promptInput');
            const adviceOutput = document.getElementById('adviceText');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const generateButton = document.getElementById('generateButton');
            
            const userQuery = promptInput.value.trim();

            if (!userQuery) {
                adviceOutput.innerHTML = '<span style="color: #F94144;">Per favore, inserisci uno scenario o un problema di visualizzazione dati.</span>';
                return;
            }

            loadingIndicator.classList.remove('hidden');
            generateButton.disabled = true;
            adviceOutput.innerHTML = '';
            
            const systemPrompt = "Agisci come un esperto di Data Visualization e Storytelling. Analizza lo scenario fornito dall'utente e restituisci un consiglio conciso (massimo 80 parole) e pratico, suggerendo il tipo di grafico migliore e la strategia chiave di storytelling da usare. Rispondi solo in italiano.";

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };

            try {
                const response = await fetchWithRetry(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    adviceOutput.innerHTML = text.replace(/\n/g, '<br>');
                } else {
                    adviceOutput.innerHTML = '<span style="color: #F94144;">Errore nella generazione: impossibile ottenere un consiglio dall\'AI.</span>';
                }
            } catch (error) {
                adviceOutput.innerHTML = `<span style="color: #F94144;">Si √® verificato un errore di rete. Riprova. (Dettagli: ${error.message})</span>`;
            } finally {
                loadingIndicator.classList.add('hidden');
                generateButton.disabled = false;
            }
        }
    </script>
</body>
</html>
